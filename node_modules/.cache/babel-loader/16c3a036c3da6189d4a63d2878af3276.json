{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Indana Rishi\\\\Desktop\\\\Course\\\\Javascript Project\\\\github-jobs\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:\\\\Users\\\\Indana Rishi\\\\Desktop\\\\Course\\\\Javascript Project\\\\github-jobs\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{useReducer,useEffect}from'react';import axios from'axios';var ACTIONS={MAKE_REQUEST:'make-request',GET_DATA:'get-data',ERROR:'error',UPDATE_HAS_NEXT_PAGE:'update-has-next-page'};var BASE_URL='https://cors-anywhere.herokuapp.com/https://jobs.github.com/positions.json';function reducer(state,action){switch(action.type){case ACTIONS.MAKE_REQUEST:return{loading:true,jobs:[]};case ACTIONS.GET_DATA:return _objectSpread(_objectSpread({},state),{},{loading:false,jobs:action.payload.jobs});case ACTIONS.ERROR:return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload.error,jobs:[]});case ACTIONS.UPDATE_HAS_NEXT_PAGE:return _objectSpread(_objectSpread({},state),{},{hasNextPage:action.payload.hasNextPage});default:return state;}}export default function useFetchJobs(params,page){var _useReducer=useReducer(reducer,{jobs:[],loading:true}),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){var cancelToken1=axios.CancelToken.source();dispatch({type:ACTIONS.MAKE_REQUEST});axios.get(BASE_URL,{cancelToken:cancelToken1.token,params:_objectSpread({markdown:true,page:page},params)}).then(function(res){dispatch({type:ACTIONS.GET_DATA,payload:{jobs:res.data}});}).catch(function(e){if(axios.isCancel(e))return;dispatch({type:ACTIONS.ERROR,payload:{error:e}});});var cancelToken2=axios.CancelToken.source();axios.get(BASE_URL,{cancelToken:cancelToken2.token,params:_objectSpread({markdown:true,page:page+1},params)}).then(function(res){dispatch({type:ACTIONS.UPDATE_HAS_NEXT_PAGE,payload:{hasNextPage:res.data.length!==0}});}).catch(function(e){if(axios.isCancel(e))return;dispatch({type:ACTIONS.ERROR,payload:{error:e}});});return function(){cancelToken1.cancel();cancelToken2.cancel();};},[params,page]);return state;}","map":{"version":3,"sources":["C:/Users/Indana Rishi/Desktop/Course/Javascript Project/github-jobs/src/useFetchJobs.js"],"names":["useReducer","useEffect","axios","ACTIONS","MAKE_REQUEST","GET_DATA","ERROR","UPDATE_HAS_NEXT_PAGE","BASE_URL","reducer","state","action","type","loading","jobs","payload","error","hasNextPage","useFetchJobs","params","page","dispatch","cancelToken1","CancelToken","source","get","cancelToken","token","markdown","then","res","data","catch","e","isCancel","cancelToken2","length","cancel"],"mappings":"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","sourcesContent":["import { useReducer, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ACTIONS = {\r\n    MAKE_REQUEST: 'make-request',\r\n    GET_DATA: 'get-data',\r\n    ERROR: 'error',\r\n    UPDATE_HAS_NEXT_PAGE: 'update-has-next-page'\r\n}\r\n\r\nconst BASE_URL = 'https://cors-anywhere.herokuapp.com/https://jobs.github.com/positions.json';\r\n\r\nfunction reducer(state, action){\r\n    switch(action.type){\r\n        case ACTIONS.MAKE_REQUEST:\r\n            return { loading: true, jobs: [] }\r\n        case ACTIONS.GET_DATA:\r\n            return {...state, loading: false, jobs: action.payload.jobs }\r\n        case ACTIONS.ERROR:\r\n            return {...state, loading: false, error: action.payload.error, jobs: [] }\r\n        case ACTIONS.UPDATE_HAS_NEXT_PAGE:\r\n            return {...state, hasNextPage: action.payload.hasNextPage }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default function useFetchJobs(params, page){\r\n    const [state, dispatch] = useReducer(reducer, { jobs: [], loading: true })\r\n\r\n    useEffect(() => {\r\n        const cancelToken1 = axios.CancelToken.source();\r\n        dispatch({ type: ACTIONS.MAKE_REQUEST })\r\n        axios.get(BASE_URL, {\r\n            cancelToken: cancelToken1.token,\r\n            params: { markdown: true, page: page, ...params }\r\n        }).then(res => {\r\n            dispatch({ type: ACTIONS.GET_DATA, payload: { jobs: res.data } })\r\n        }).catch(e => {\r\n            if (axios.isCancel(e)) return\r\n            dispatch({ type: ACTIONS.ERROR, payload: { error: e } })\r\n        })\r\n\r\n        const cancelToken2 = axios.CancelToken.source();\r\n        axios.get(BASE_URL, {\r\n            cancelToken: cancelToken2.token,\r\n            params: { markdown: true, page: page + 1, ...params }\r\n        }).then(res => {\r\n            dispatch({ type: ACTIONS.UPDATE_HAS_NEXT_PAGE, payload: { hasNextPage: res.data.length !== 0 } })\r\n        }).catch(e => {\r\n            if (axios.isCancel(e)) return\r\n            dispatch({ type: ACTIONS.ERROR, payload: { error: e } })\r\n        })\r\n\r\n        return () => {\r\n            cancelToken1.cancel();\r\n            cancelToken2.cancel();\r\n        }\r\n    }, [params, page])\r\n\r\n    return state\r\n}"]},"metadata":{},"sourceType":"module"}